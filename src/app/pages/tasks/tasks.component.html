<p-table
  #pt
  tableStyleClass="tasks-table"
  [value]="items"
  dataKey="id"
  editMode="row"
  [globalFilterFields]="['name', 'taskNumber']"
  dataKey="projectId"
>
  <ng-template pTemplate="body" let-item let-rowIndex="rowIndex" let-expanded="expanded">
    <tr class="task-project" *ngIf="rowGroupMetadata[item.projectId].index === rowIndex">
      <td class="task-project__cell" colspan="5">
        <button
          class="task-project__btn"
          type="button"
          pButton
          pRipple
          [pRowToggler]="item"
          class="p-button-text p-button-rounded p-button-plain p-mr-2"
          [icon]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"
        ></button>

        <h4 class="task-project__name p-ml-2 p-my-0">{{ item.projectName }}</h4>
      </td>
    </tr>
  </ng-template>

  <ng-template pTemplate="rowexpansion" let-item>
    <tr class="task">
      <td class="task__cell">
        <span class="task__number">#{{ item.taskNumber }}</span>
      </td>

      <td class="task__cell">
        <span class="task__name">{{ item.name }}</span>
      </td>

      <td class="task__cell">
        <span class="task__status" [class]="'item-badge status-' + item.status">{{ item.status }}</span>
      </td>
    </tr>
  </ng-template>
</p-table>

<app-add-btn (clickBtn)="onAddBtnClick()"></app-add-btn>
